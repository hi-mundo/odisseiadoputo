<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Blog de tecnologia e desenvolvimento — artigos, tutoriais e opinião.">

    <title>Programação funcional e reativa é para todos - A odisseia do puto</title>

    <link rel="canonical" href="http://localhost:4000/functional/2016/03/14/generic-functional-reactive-post/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">
    <link rel="stylesheet" href="/css/odisseia.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">
    
    <!-- Share CSS -->
    <link rel="stylesheet" href="/css/share.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="A odisseia do puto" />

    

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">A odisseia do puto</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
				
                <li>
                    <a href="/about/">Sobre</a>
                </li>
				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header">
    <div class="intro-header-overlay">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Programação funcional e reativa é para todos</h1>
                        
                        <h2 class="subheading">Como inserir RxSwift + Programação funcional naquele seu projeto que está 90% concluído</h2>
                        
                        <span class="meta">Postado por Bruno Bilescky em 14/03/2016</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="share">
  <li><a href="https://twitter.com/intent/tweet?text=Programação funcional e reativa é para todos&url=http://localhost:4000/functional/2016/03/14/generic-functional-reactive-post/" rel="nofollow" target="_blank" title="Share on Twitter"><i class="fa fa-twitter-square"></i></a></li>
  <li><a href="https://facebook.com/sharer.php?u=http://localhost:4000/functional/2016/03/14/generic-functional-reactive-post/" rel="nofollow" target="_blank" title="Share on Facebook"><i class="fa fa-facebook-square"></i></a></li>
  <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/functional/2016/03/14/generic-functional-reactive-post/" rel="nofollow" target="_blank" title="Share on Linkedlin"><i class="fa fa-linkedin-square"></i></a></li>
  <li><a href="https://plus.google.com/share?url=http://localhost:4000/functional/2016/03/14/generic-functional-reactive-post/" rel="nofollow" target="_blank" title="Share on Google+"><i class="fa fa-google-plus-square"></i></a></li>
</ul>

				<blockquote>
  <h4 id="bruno-bilescky-bgondim">Bruno Bilescky (<a href="https://twitter.com/bgondim" target="_blank">@bgondim</a>)</h4>
  <p><code class="language-plaintext highlighter-rouge">let currentJob = "desenvolvedor backend(java, ruby, c#) ".map { _ in "Desenvolvedor frontend(js) " }. map { _ in "desenvolvedor mobile (Objective-C, Java, C#" }.map { _ in "desenvolvedor iOS(Swift)" }</code>.
Estudante das artes de programação funcional e reativa</p>
</blockquote>

<p>Muitos desenvolvedores quando escutam falar de programação funcional e programação reativa assumem uma postura defensiva e a conversa tende a não sair do lugar. <em>“Mas o meu aplicativo já está 50% desenvolvido, não vale a pena mudar a arquitetura dele agora.”</em>, ou então <em>“Eu só estou dando manutenção neste aplicativo, não tenho tempo para alterar a arquitetura dele.”</em>, ou ainda <em>” Não posso mudar a arquitetura do projeto, porque ninguém mais da equipe sabe essa magia negra aí”</em> são frases frequentes que vamos encontrar ao tentar sugerir a adoção desses paradigmas.</p>

<p>Mas o que esses desenvolvedores não sabem é que programação funcional/reativa <strong>não</strong> necessita que você altere a arquitetura do seu projeto.</p>

<p><strong>A programação funcional tem muito mais a ver com paradigmas a serem utilizados do que com frameworks e arquiteturas de projetos</strong>.</p>

<p>Mas obviamente existem diversas arquiteturas e frameworks que facilitam a adoção desses paradigmas, porém elas não são obrigatórias e você pode <strong>sim</strong> começar hoje mesmo a inserir códigos funcionais e reativos no seu projeto.</p>

<p>Neste artigo vamos fazer extenso uso de <a href="https://github.com/ReactiveX/RxSwift" target="_blank">RxSwift</a>, uma biblioteca de programação Reativa.</p>

<p>Agora, caso este seja o seu primeiro contato com esta biblioteca, ou você ainda não se sinta confortável com os paradigmas funcionais, ou ainda você é um marinheiro de primeira viagem neste blog, eu recomendo que você leia  <a href="http://equinocios.com/2016/03/14/rxswift-como-eu-vim-parar-aqui/" target="_blank">“RxSwift: Como vim parar aqui”</a>, publicado pelo <a href="https://twitter.com/brunokoga" target="_blank">Bruno Koga</a> aqui no EquinociOS. Ou ainda, visite a <a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/GettingStarted.md">documentação</a> do projeto.</p>

<hr />

<h3 id="fazendo-mais-com-menos">Fazendo mais com menos</h3>
<p>Bom esta é a ideia deste post. Mostrar como podemos utilizar o paradigma da programação funcional, junto com RxSwift e com uma pitada de <strong>Generics</strong> para tornar o seu código mais reativo e funcional.</p>

<p>E para isso eu desenvolvi um aplicativo de gerenciamento de despesas (<a href="https://github.com/brunogb/ExpenseTracker" target="_blank">github</a>) para ilustrar alguns pontos que quero abordar. Eu sugiro que você baixe o código, de uma olhada no projeto, brinque um pouco com o aplicativo e depois volte para continuarmos.</p>

<h3 id="bom-agora-que-você-voltou-podemos-começar">Bom, agora que você voltou podemos começar…</h3>
<p>Sobre a arquitetura do projeto, além do <strong>RxSwift</strong> para a programação reativa, estou utilizando o <strong><a href="https://realm.io">Realm</a></strong> para gerenciar o banco de dados local, o <strong><a href="https://github.com/hyperoslo/Hue">Hue</a></strong> para o gerenciamento de cores, o <strong><a href="https://github.com/SnapKit/SnapKit">SnapKit</a></strong> para usar autolayout no código e o <strong><a href="https://github.com/mbogh/NibDesignable">NibDesignable</a></strong> para gerenciar as telas e deixar mais leve nosso storyboard.</p>

<p>Um dos recursos mais interessantes do <strong>Realm</strong>, a lista com <em>live update</em> permite que façamos uma query no banco, que está sempre atualizada, incluindo atualizações que transações futuras podem efetuar na base, facilitando manter nossa UI sempre fresca e atualizada.</p>

<p>Porém o <strong>Realm</strong> não tem suporte nativo para RxSwift. No entanto, é muito simples criar nossas próprias sequências de dados (<strong><a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/GettingStarted.md#observables-aka-sequences">Observables</a></strong>, como são chamados no RxSwift) e podemos nós mesmos adicionar esse suporte.</p>

<p><strong><a href="https://twitter.com/fpillet">@fpillet</a></strong>(um usuário bem ativo da comunidade de RxSwift) fez um <a href="https://gist.github.com/fpillet/4ceb477eeb2705fb5159">gist</a> adicionando este recurso ao <strong>Realm</strong> e nós vamos utilizar este gist no nosso projeto.</p>

<p>Bom vamos ao código:</p>

<blockquote>
  <h4 id="talk-is-cheap-show-me-the-code">Talk is cheap. Show me the code</h4>
  <p><em>Torvalds, Linus</em></p>
</blockquote>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">RealmSwift</span>
<span class="kd">import</span> <span class="kt">RxSwift</span>

<span class="kd">struct</span> <span class="kt">AppState</span> <span class="p">{</span>
    
    <span class="kd">private</span> <span class="k">let</span> <span class="nv">disposeBag</span> <span class="o">=</span> <span class="kt">DisposeBag</span><span class="p">()</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">current</span> <span class="o">=</span> <span class="kt">AppState</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">currentCategory</span> <span class="o">=</span> <span class="kt">Variable</span><span class="o">&lt;</span><span class="kt">ExpenseCategory</span><span class="p">?</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">entries</span> <span class="o">=</span> <span class="kt">Variable</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Expense</span><span class="p">]</span><span class="o">&gt;</span><span class="p">([])</span>
    <span class="k">let</span> <span class="nv">allEntries</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Expense</span><span class="p">]</span><span class="o">&gt;</span>
    <span class="k">let</span> <span class="nv">allExpenses</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Expense</span><span class="p">]</span><span class="o">&gt;</span>
    <span class="k">let</span> <span class="nv">currentExpensesTotal</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span>
    <span class="k">let</span> <span class="nv">currentTintColor</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">UIColor</span><span class="o">&gt;</span>
    
    <span class="kd">private</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">observableCategory</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">currentCategory</span><span class="o">.</span><span class="nf">asObservable</span><span class="p">()</span>
        
        <span class="n">observableCategory</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">category</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="k">in</span>
            <span class="k">guard</span> <span class="k">let</span> <span class="nv">selectedCategory</span> <span class="o">=</span> <span class="n">category</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">selectedCategory</span><span class="o">.</span><span class="n">rawValue</span>
        <span class="p">}</span><span class="o">.</span><span class="nf">distinctUntilChanged</span><span class="p">()</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">categoryNumber</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Expense</span><span class="p">]</span><span class="o">&gt;</span> <span class="k">in</span>
            <span class="k">let</span> <span class="nv">realm</span> <span class="o">=</span> <span class="k">try!</span> <span class="kt">Realm</span><span class="p">()</span>
            <span class="k">var</span> <span class="nv">results</span> <span class="o">=</span> <span class="n">realm</span><span class="o">.</span><span class="nf">objects</span><span class="p">(</span><span class="kt">Expense</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">categoryNumber</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">{</span>
                <span class="n">results</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="nf">filter</span><span class="p">(</span><span class="s">"_category == </span><span class="se">\(</span><span class="n">categoryNumber</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="n">results</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="nf">sorted</span><span class="p">(</span><span class="s">"date"</span><span class="p">,</span> <span class="nv">ascending</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">results</span><span class="o">.</span><span class="nf">asObservableArray</span><span class="p">()</span>
        <span class="p">}</span><span class="o">.</span><span class="nf">switchLatest</span><span class="p">()</span><span class="o">.</span><span class="nf">bindTo</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">entries</span><span class="p">)</span><span class="o">.</span><span class="nf">addDisposableTo</span><span class="p">(</span><span class="n">disposeBag</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">allEntries</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="nf">asObservable</span><span class="p">()</span>
        
        <span class="k">self</span><span class="o">.</span><span class="n">allExpenses</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">allEntries</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">expenses</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Expense</span><span class="p">]</span> <span class="k">in</span>
            <span class="k">return</span> <span class="n">expenses</span><span class="o">.</span><span class="n">filter</span> <span class="p">{</span> <span class="n">expense</span> <span class="k">in</span>
                <span class="k">return</span> <span class="n">expense</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="kt">ExpenseType</span><span class="o">.</span><span class="kt">Outcome</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="k">self</span><span class="o">.</span><span class="n">currentExpensesTotal</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">allExpenses</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Double</span> <span class="k">in</span>
            <span class="k">return</span> <span class="n">list</span><span class="o">.</span><span class="nf">reduce</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nv">combine</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="n">expense</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Double</span> <span class="k">in</span>
                <span class="k">return</span> <span class="n">total</span> <span class="o">+</span> <span class="n">expense</span><span class="o">.</span><span class="n">amount</span>
            <span class="p">})</span>
        <span class="p">}</span>
        
        <span class="k">self</span><span class="o">.</span><span class="n">currentTintColor</span> <span class="o">=</span> <span class="n">observableCategory</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">category</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">UIColor</span> <span class="k">in</span>
            <span class="k">return</span> <span class="kt">UIColor</span><span class="o">.</span><span class="nf">hex</span><span class="p">(</span><span class="n">category</span><span class="p">?</span><span class="o">.</span><span class="n">tintColor</span> <span class="p">??</span> <span class="kt">ExpenseCategory</span><span class="o">.</span><span class="n">allColors</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
<span class="p">}</span>
</code></pre></div></div>

<p>Basicamente este é um objeto que representa o <strong><em>estado atual</em></strong> do aplicativo. Ele é responsável por rastrear as mudanças no banco de dados e expor os valores ja mapeados para serem consumidos pelas outras classes e funções. Vamos então analisar as partes deste código:</p>

<h3 id="mantendo-sempre-o-estado-atual-atualizado">Mantendo sempre o “estado atual” atualizado…</h3>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">currentCategory</span> <span class="o">=</span> <span class="kt">Variable</span><span class="o">&lt;</span><span class="kt">ExpenseCategory</span><span class="p">?</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">entries</span> <span class="o">=</span> <span class="kt">Variable</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Expense</span><span class="p">]</span><span class="o">&gt;</span><span class="p">([])</span>
<span class="k">let</span> <span class="nv">allEntries</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Expense</span><span class="p">]</span><span class="o">&gt;</span>
<span class="k">let</span> <span class="nv">allExpenses</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Expense</span><span class="p">]</span><span class="o">&gt;</span>
<span class="k">let</span> <span class="nv">currentExpensesTotal</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Double</span><span class="o">&gt;</span>
<span class="k">let</span> <span class="nv">currentTintColor</span><span class="p">:</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">UIColor</span><span class="o">&gt;</span>
</code></pre></div></div>
<p>Estas são as propriedades disponíveis para serem observadas, e basicamente todas são dependentes de <code class="language-plaintext highlighter-rouge">currentCategory</code>. Quando a categoria atual é alterada, todas as outras propriedades também são atualizadas. Conseguimos este feito com o seguinte código:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">observableCategory</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">currentCategory</span><span class="o">.</span><span class="nf">asObservable</span><span class="p">()</span>        
<span class="n">observableCategory</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">category</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="k">in</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">selectedCategory</span> <span class="o">=</span> <span class="n">category</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">selectedCategory</span><span class="o">.</span><span class="n">rawValue</span>
<span class="p">}</span><span class="o">.</span><span class="nf">distinctUntilChanged</span><span class="p">()</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">categoryNumber</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Expense</span><span class="p">]</span><span class="o">&gt;</span> <span class="k">in</span>
    <span class="k">let</span> <span class="nv">realm</span> <span class="o">=</span> <span class="k">try!</span> <span class="kt">Realm</span><span class="p">()</span>
    <span class="k">var</span> <span class="nv">results</span> <span class="o">=</span> <span class="n">realm</span><span class="o">.</span><span class="nf">objects</span><span class="p">(</span><span class="kt">Expense</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">categoryNumber</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="nf">filter</span><span class="p">(</span><span class="s">"_category == </span><span class="se">\(</span><span class="n">categoryNumber</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="nf">sorted</span><span class="p">(</span><span class="s">"date"</span><span class="p">,</span> <span class="nv">ascending</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span><span class="o">.</span><span class="nf">asObservableArray</span><span class="p">()</span>
<span class="p">}</span><span class="o">.</span><span class="nf">switchLatest</span><span class="p">()</span><span class="o">.</span><span class="nf">bindTo</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">entries</span><span class="p">)</span><span class="o">.</span><span class="nf">addDisposableTo</span><span class="p">(</span><span class="n">disposeBag</span><span class="p">)</span>
</code></pre></div></div>
<p>Primeiro estamos mapeando a categoria selecionada(<code class="language-plaintext highlighter-rouge">ExpenseCategory</code>) para um <code class="language-plaintext highlighter-rouge">Int</code> (Caso nenhuma categoria esteja selecionada, mapeamos o resultado para <code class="language-plaintext highlighter-rouge">-1</code>). Por que um <code class="language-plaintext highlighter-rouge">Int</code>? Porque este é o valor mapeado no banco de dados do Realm.</p>

<p>Mas nós não queremos atualizar a query quando selecionarmos uma nova categoria que seja igual a categoria atual (A nossa lista já é auto-atualizável, não precisamos fazer nada aqui). Essa é a função do <code class="language-plaintext highlighter-rouge">distinctUntilChanged</code>. Ele filtra resultados que sejam iguais ao último enviado.</p>

<p>Depois, utilizamos este <code class="language-plaintext highlighter-rouge">Int</code> para fazer nossa query no banco de dados (<code class="language-plaintext highlighter-rouge">"_category == \(categoryNumber)"</code>), e utilizando aquele <a href="https://gist.github.com/fpillet/4ceb477eeb2705fb5159">gist</a>, retornamos uma sequência observável destes registros encontrados pela nossa query.</p>

<p>Perceba que nesse passo estamos gerando um <code class="language-plaintext highlighter-rouge">Observable</code> que produz um <code class="language-plaintext highlighter-rouge">Observable</code> que produz uma lista de Expenses(<code class="language-plaintext highlighter-rouge">&lt;[Expense]&gt;</code>). Confuso? A princípo pode parecer que sim, mas para tentar entender, <strong>vamos fazer uma analogia com uma impressora 3D. Pense que um <code class="language-plaintext highlighter-rouge">Observable</code> é como uma impressora 3D especializada em imprimir um objeto de um tipo <code class="language-plaintext highlighter-rouge">E</code>. No nosso caso, nós estamos criando uma impressora 3D que imprime outra impressora 3D especializada em imprimir uma lista de <code class="language-plaintext highlighter-rouge">E</code></strong> (é como se toda vez que mudamos <code class="language-plaintext highlighter-rouge">self.currentCategory</code> criamos uma nova impressora 3D que imprime os itens). Mas nós estamos interessados em observar a lista de Expenses e não as impressoras que geram elas. E como fazemos isso? Utilizando o <code class="language-plaintext highlighter-rouge">switchLatest</code>. Com este operador nós utilizamos os resultados sempre da <em>última impressora que imprime a lista de itens</em> que for gerada pela nossa impressora matriz. Com isso nós criamos uma Impressora que imprime uma lista de <code class="language-plaintext highlighter-rouge">E</code>, ou <code class="language-plaintext highlighter-rouge">Observable&lt;[E]&gt;</code></p>

<blockquote>
  <p>Assim: <code class="language-plaintext highlighter-rouge">Observable&lt;Observable&lt;[Expense]&gt;&gt;.switchLatest = Observable&lt;[Expense]&gt;</code></p>
</blockquote>

<p>Espero que essa analogia tenha facilitado um pouco as coisas.</p>

<p>E por fim salvamos uma referencia a esse <code class="language-plaintext highlighter-rouge">Observable</code> em <code class="language-plaintext highlighter-rouge">self.entries</code>. Com isso, toda vez que <code class="language-plaintext highlighter-rouge">self.currentCategory</code> receber um novo valor distinto do anterior, iremos refazer nossa query e com isso atualizar a variável <code class="language-plaintext highlighter-rouge">self.entries</code> com os novos registros. 
E como utilizamos aquele gist, <code class="language-plaintext highlighter-rouge">self.entries</code> vai sempre se manter atualizada com os registros filtrados do banco, mesmo após sua inicialização.</p>

<h3 id="-para-sempre-manter-nossa-ui-atualizada">… Para sempre manter nossa UI atualizada.</h3>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tableView</span><span class="o">.</span><span class="nf">registerNib</span><span class="p">(</span><span class="kt">R</span><span class="o">.</span><span class="n">nib</span><span class="o">.</span><span class="n">expenseDisplayTableViewCell</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">cellIdentifier</span> <span class="o">=</span> <span class="kt">R</span><span class="o">.</span><span class="n">nib</span><span class="o">.</span><span class="n">expenseDisplayTableViewCell</span><span class="o">.</span><span class="n">identifier</span>
<span class="kt">AppState</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">allEntries</span><span class="o">.</span><span class="nf">bindTo</span><span class="p">(</span><span class="n">tableView</span><span class="o">.</span><span class="nf">rx_itemsWithCellIdentifier</span><span class="p">(</span><span class="n">cellIdentifier</span><span class="p">,</span> <span class="nv">cellType</span><span class="p">:</span> <span class="kt">ExpenseDisplayTableViewCell</span><span class="o">.</span><span class="k">self</span><span class="p">))</span> <span class="p">{(</span><span class="n">index</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">cell</span><span class="p">)</span> <span class="k">in</span>
	<span class="k">let</span> <span class="nv">number</span> <span class="o">=</span> <span class="kt">NSNumber</span><span class="p">(</span><span class="nv">double</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">amount</span><span class="p">)</span>
	<span class="k">let</span> <span class="nv">value</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">numberFormatter</span><span class="o">.</span><span class="nf">stringFromNumber</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="p">??</span> <span class="s">""</span>
	<span class="n">cell</span><span class="o">.</span><span class="n">amountLabel</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">value</span>
	<span class="n">cell</span><span class="o">.</span><span class="n">categoryNameLabel</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">category</span><span class="p">?</span><span class="o">.</span><span class="n">description</span> <span class="p">??</span> <span class="s">"Sem categoria"</span>
	<span class="n">cell</span><span class="o">.</span><span class="nf">applyColor</span><span class="p">(</span><span class="kt">UIColor</span><span class="o">.</span><span class="nf">hex</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">category</span><span class="p">?</span><span class="o">.</span><span class="n">tintColor</span> <span class="p">??</span> <span class="kt">ExpenseCategory</span><span class="o">.</span><span class="n">allColors</span><span class="p">))</span>
<span class="p">}</span><span class="o">.</span><span class="nf">addDisposableTo</span><span class="p">(</span><span class="n">disposeBag</span><span class="p">)</span>
</code></pre></div></div>
<p>Aqui estamos criando um datasource dinâmico e anônimo, já configurado para exibir todos os items de <code class="language-plaintext highlighter-rouge">AppState.current.allEntries</code>. Se a lista de itens de <code class="language-plaintext highlighter-rouge">allEntries</code> mudar, nossa <code class="language-plaintext highlighter-rouge">tableView</code> também será atualizada automaticamente.</p>

<p>E para manter nossos labels atualizados e a tela com a cor da categoria:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">AppState</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">currentTintColor</span><span class="o">.</span><span class="nf">subscribeNext</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">applyColor</span><span class="p">)</span><span class="o">.</span><span class="nf">addDisposableTo</span><span class="p">(</span><span class="n">disposeBag</span><span class="p">)</span>
<span class="kt">AppState</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">currentCategory</span><span class="o">.</span><span class="nf">asObservable</span><span class="p">()</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">category</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="k">in</span>
    <span class="k">return</span> <span class="n">category</span><span class="p">?</span><span class="o">.</span><span class="n">description</span> <span class="p">??</span> <span class="s">"Todas as categorias"</span>
<span class="p">}</span><span class="o">.</span><span class="nf">bindTo</span><span class="p">(</span><span class="n">amountType</span><span class="o">.</span><span class="n">rx_text</span><span class="p">)</span><span class="o">.</span><span class="nf">addDisposableTo</span><span class="p">(</span><span class="n">disposeBag</span><span class="p">)</span>
<span class="kt">AppState</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">currentExpensesTotal</span><span class="o">.</span><span class="nf">map</span><span class="p">({</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="k">in</span>
    <span class="k">return</span> <span class="k">self</span><span class="o">.</span><span class="n">numberFormatter</span><span class="o">.</span><span class="nf">stringFromNumber</span><span class="p">(</span><span class="kt">NSNumber</span><span class="p">(</span><span class="nv">double</span><span class="p">:</span> <span class="n">value</span><span class="p">))</span> <span class="p">??</span> <span class="s">""</span>
<span class="p">})</span><span class="o">.</span><span class="nf">bindTo</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">amountLabel</span><span class="o">.</span><span class="n">rx_text</span><span class="p">)</span><span class="o">.</span><span class="nf">addDisposableTo</span><span class="p">(</span><span class="n">disposeBag</span><span class="p">)</span>
</code></pre></div></div>
<p>Com esse código nossa UI vai estar sempre atualizada com a última categoria selecionada.</p>

<h3 id="ok-este-rxswift-parace-interessante-mesmo-mas-e-a-tal-da-programação-funcional-onde-vamos-utilizar">Ok, este RxSwift parace interessante mesmo, mas e a tal da programação funcional? Onde vamos utilizar?</h3>
<p>Na verdade nós já estamos utilizando e talvez você não tenha percebido. Quando executamos:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">observableCategory</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">category</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="k">in</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">selectedCategory</span> <span class="o">=</span> <span class="n">category</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">selectedCategory</span><span class="o">.</span><span class="n">rawValue</span>
<span class="p">}</span>
</code></pre></div></div>

<p>estamos criando uma <strong>função anônima</strong> e passando ela como parâmetro para a função <code class="language-plaintext highlighter-rouge">map</code>. Porém, poderíamos ter criado uma função assim:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">func</span> <span class="nf">mapExpenseCategoryToInt</span><span class="p">(</span><span class="nv">category</span><span class="p">:</span> <span class="kt">ExpenseCategory</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">selectedCategory</span> <span class="o">=</span> <span class="n">category</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">selectedCategory</span><span class="o">.</span><span class="n">rawValue</span>
    <span class="p">}</span>
</code></pre></div></div>
<p>e utilizado esta função, nossa chamada do <code class="language-plaintext highlighter-rouge">map</code> ficaria deste jeito:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">observableCategory</span><span class="o">.</span><span class="nf">map</span><span class="p">(</span><span class="n">mapExpenseCategoryToInt</span><span class="p">)</span>
</code></pre></div></div>
<p>Como já estávamos fazendo na função que altera a cor do nosso cabeçalho:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">AppState</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">currentTintColor</span><span class="o">.</span><span class="nf">subscribeNext</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">applyColor</span><span class="p">)</span><span class="o">.</span><span class="nf">addDisposableTo</span><span class="p">(</span><span class="n">disposeBag</span><span class="p">)</span>
</code></pre></div></div>
<p>Na programação funcional, as funções que criamos são cidadãs de primeira classe, assim como objetos e value types, e podem ser passadas como parâmetros, serem referenciadas e executadas arbitráriamente.</p>

<h3 id="hummm-interessante-mas-e-o-generics-onde-ele-se-encaixa-nessa-história-toda">Hummm, interessante, mas e o Generics? Onde ele se encaixa nessa história toda?</h3>
<p>Generics te ajuda a escrever menos código e abranger mais situações. Ao escrever funções genericas você está aumentando o escopo onde estas funções podem ser utilizadas. E isso faz todo o sentido quando falamos de RxSwift e programação funcional.</p>

<p>Além do que temos menos código para testar e manter.</p>

<p>Praticamente todos os operadores que utilizamos do RxSwift são genéricos. <code class="language-plaintext highlighter-rouge">switchLatest</code>, <code class="language-plaintext highlighter-rouge">map</code>, <code class="language-plaintext highlighter-rouge">filter</code>, todos podem ser utilizados de maneira genérica, desde que os tipos de retorno desses <code class="language-plaintext highlighter-rouge">Observable</code> conformem com os protocolos específicos.</p>

<h3 id="legal-mas-tudo-que-você-mostrou-eu-consigo-fazer-sem-rxswift-onde-mais-ele-pode-facilitar-a-minha-vida">Legal, mas tudo que você mostrou eu consigo fazer sem RxSwift, onde mais ele pode facilitar a minha vida?</h3>
<p>Um fato bem interessate da programação reativa é que nós podemos juntar as sequências, criando um fluxo bem complexo a partir de fluxos mais simples e fáceis de testar. E aí a programação reativa começa a brilhar, pois para juntar estes fluxos de maneira imperativa seria necessário muito mais códigos, além de refatoramentos e mudanças nas APIs dos métodos.</p>

<p>Vamos, como exemplo, rastrear o status de conexão com a internet. Veja esta classe:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">ReachabilitySwift</span>
<span class="kd">import</span> <span class="kt">RxSwift</span>

<span class="k">let</span> <span class="nv">Reachable</span> <span class="o">=</span> <span class="nf">_Reachable</span><span class="p">()</span>
<span class="kd">struct</span> <span class="n">_Reachable</span> <span class="p">{</span>
    
    <span class="k">let</span> <span class="nv">reachability</span><span class="p">:</span> <span class="kt">Reachability</span>
    <span class="k">let</span> <span class="nv">disposeBag</span> <span class="o">=</span> <span class="kt">DisposeBag</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">internetStatus</span> <span class="o">=</span> <span class="kt">Variable</span><span class="o">&lt;</span><span class="kt">Reachability</span><span class="o">.</span><span class="kt">NetworkStatus</span><span class="o">&gt;</span><span class="p">(</span><span class="o">.</span><span class="kt">NotReachable</span><span class="p">)</span>
    
    <span class="kd">private</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">reachability</span> <span class="o">=</span> <span class="k">try!</span> <span class="kt">Reachability</span><span class="o">.</span><span class="nf">reachabilityForInternetConnection</span><span class="p">()</span>
        <span class="nf">createObservable</span><span class="p">()</span><span class="o">.</span><span class="nf">bindTo</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">internetStatus</span><span class="p">)</span><span class="o">.</span><span class="nf">addDisposableTo</span><span class="p">(</span><span class="n">disposeBag</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">createObservable</span><span class="p">()</span><span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Reachability</span><span class="o">.</span><span class="kt">NetworkStatus</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">Observable</span><span class="o">.</span><span class="n">create</span> <span class="p">{</span> <span class="n">observer</span> <span class="k">in</span>
            <span class="k">let</span> <span class="nv">cancel</span> <span class="o">=</span> <span class="kt">AnonymousDisposable</span> <span class="p">{</span>
                <span class="k">self</span><span class="o">.</span><span class="n">reachability</span><span class="o">.</span><span class="nf">stopNotifier</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="k">let</span> <span class="nv">reachableUpdateBlock</span><span class="p">:</span> <span class="p">(</span><span class="kt">Reachability</span><span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span> <span class="n">r</span> <span class="k">in</span>
                <span class="n">observer</span><span class="o">.</span><span class="nf">onNext</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">currentReachabilityStatus</span><span class="p">)</span>
            <span class="p">}</span>
            
            <span class="k">self</span><span class="o">.</span><span class="n">reachability</span><span class="o">.</span><span class="n">whenReachable</span> <span class="o">=</span> <span class="n">reachableUpdateBlock</span>
            <span class="k">self</span><span class="o">.</span><span class="n">reachability</span><span class="o">.</span><span class="n">whenUnreachable</span> <span class="o">=</span> <span class="n">reachableUpdateBlock</span>
            
            <span class="k">try!</span> <span class="k">self</span><span class="o">.</span><span class="n">reachability</span><span class="o">.</span><span class="nf">startNotifier</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">cancel</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Aqui estamos criando uma sequencia que informa o estado atual da conexão com a internet. Se quisermos apenas consultar o ultimo valor enviado podemos utilizar <code class="language-plaintext highlighter-rouge">Reachable.internetStatus.value</code>.</p>

<p>Mas podemos criar funções que operem em cima desse <code class="language-plaintext highlighter-rouge">Observable</code>.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">func</span> <span class="nf">filterInternetIsActive</span><span class="p">()</span><span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Reachability</span><span class="o">.</span><span class="kt">NetworkStatus</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">Reachable</span><span class="o">.</span><span class="n">internetStatus</span><span class="o">.</span><span class="nf">asObservable</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span> <span class="p">{</span> <span class="n">status</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">status</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">NotReachable</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">false</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">filterInternetIsOffline</span><span class="p">()</span><span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Reachability</span><span class="o">.</span><span class="kt">NetworkStatus</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">Reachable</span><span class="o">.</span><span class="n">internetStatus</span><span class="o">.</span><span class="nf">asObservable</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span> <span class="p">{</span> <span class="n">status</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">status</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">NotReachable</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">true</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Agora para  exibir um alerta sempre que a conexão cair podemos utilizar: <code class="language-plaintext highlighter-rouge">filterInternetIsOffline().subscribeNex(funcToShowAlert)</code></p>

<p>Ou ainda podemos fazer uma requisição ao servidor, e caso estejamos sem internet, ou ela caia no meio da conexão, podemos tentar novamente quando a conexão voltar:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">extension</span> <span class="kt">Observable</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">retryOnInternetBecomeActive</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">E</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">self</span><span class="o">.</span><span class="nf">retryWhen</span><span class="p">({</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">Reachability</span><span class="o">.</span><span class="kt">NetworkStatus</span><span class="o">&gt;</span> <span class="k">in</span>
            <span class="k">return</span> <span class="nf">filterInternetIsActive</span><span class="p">()</span>
        <span class="p">})</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Agora com esse método podemos fazer nossa chamada na API e garantir que caso nossa conexão caia, quando ela voltar esta chamada será refeita:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">func</span> <span class="nf">tryConnection</span><span class="p">()</span><span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">NSData</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">NSURLRequest</span><span class="p">(</span><span class="kt">URL</span><span class="p">:</span> <span class="kt">NSURL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"http:path_to_api"</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
        <span class="k">return</span> <span class="kt">NSURLSession</span><span class="o">.</span><span class="nf">sharedSession</span><span class="p">()</span><span class="o">.</span><span class="nf">rx_data</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="nf">retryOnInternetBecomeActive</span><span class="p">()</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>Depois basta executar: <code class="language-plaintext highlighter-rouge">tryConnection().subscribeNext(funcToParseJSON)</code> e pronto, temos aqui nossa requisição tolerante a quedas de internet.</p>

<h3 id="finalizando">Finalizando</h3>

<p>Bom RxSwift tem ainda diversos outros recursos, e infelizmente não vamos conseguir cobrir todos em um único post. Mas eu espero que os recursos apresentados aqui, junto com os exemplos fornecidos possam lhe mostrar como pode ser simples e fácil adicionar programação funcional/reativa no seu código já existente, sem que você tenha que alterar a arquitetura do seu projeto.</p>

<p>E isso é tudo pessoal! Até o próximo post! E acompanhem o desenvolvimento do <a href="https://github.com/brunogb/ExpenseTracker">ExpenseTracker</a>, pois pretendo evoluí-lo com o passar do tempo, adicionando mais recursos funcionais e reativos.</p>

<h3 id="-agradecimentos"># Agradecimentos</h3>
<ul>
  <li>A equipe do RxSwift pela ótima lib que eles entregam</li>
  <li>A equipe do CocoaHeads BR pela iniciativa do EquinociOS! (Valeu <a href="https://github.com/shonorio">Solli</a>!!)</li>
</ul>

<h4 id="referências">Referências</h4>
<ul>
  <li><a href="https://github.com/ReactiveX/RxSwift">RxSwift</a> - <a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/">Documentação</a></li>
  <li><a href="http://slack.rxswift.org/">Slack da comunidade RxSwift</a></li>
  <li><a href="https://gist.github.com/fpillet/4ceb477eeb2705fb5159">Turn Realm auto-updating Results into an RxSwift Observable sequence</a> by <a href="https://twitter.com/fpillet">@fpillet</a></li>
  <li><a href="https://github.com/brunogb/ExpenseTracker">ExpenseTracker</a> by <a href="https://twitter.com/bgondim">@bgondim</a></li>
</ul>


                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2016/03/13/rxswift-como-eu-vim-parar-aqui/" data-toggle="tooltip" data-placement="top" title="RxSwift: como eu vim parar aqui?">&larr; Post Anterior</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/ios/2016/03/15/protocol-oriented-programming/" data-toggle="tooltip" data-placement="top" title="Protocol-Oriented Programming">Próximo Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- Disqus Content -->

                <div id="disqus_thread">
                    <script>
                        /**
                        * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                        * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                        */

                        /*
                        var disqus_config = function () {
                            this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
                            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                        };
                        */

                        (function() { // DON'T EDIT BELOW THIS LINE
                        var d = document, s = d.createElement('script');

                        s.src = '//equinocios.disqus.com/embed.js';

                        s.setAttribute('data-timestamp', +new Date());
                        (d.head || d.body).appendChild(s);
                        })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                </div>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                </ul>
                <p class="copyright text-muted">A odisseia do puto — Raimundo Pessoa & Frederico Do</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
